{
    "_comment": "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PTERODACTYL PANEL - PTERODACTYL.IO",
    "meta": {
        "version": "PTDL_v1",
        "update_url": null
    },
    "exported_at": "2022-05-14T16:22:27+02:00",
    "name": "modrinth-serverpack",
    "author": "olle.ljung@gmail.com",
    "description": "Egg for Modrinth serverpacks",
    "features": [
        "eula",
        "java_version",
        "pid_limit"
    ],
    "images": [
        "ghcr.io\/pterodactyl\/yolks:java_17",
        "ghcr.io\/pterodactyl\/yolks:java_16",
        "ghcr.io\/pterodactyl\/yolks:java_11",
        "ghcr.io\/pterodactyl\/yolks:java_8",
        "ghcr.io\/pterodactyl\/yolks:java_14"
    ],
    "file_denylist": [],
    "startup": "java -Xms128M -Xmx$(({{SERVER_MEMORY}}-512))M {{STARTUP_FLAGS}} -Dterminal.jline=false -Dterminal.ansi=true -jar {{SERVER_JARFILE}}",
    "config": {
        "files": "{\r\n    \"server.properties\": {\r\n        \"parser\": \"properties\",\r\n        \"find\": {\r\n            \"server-ip\": \"0.0.0.0\",\r\n            \"enable-query\": \"true\",\r\n            \"server-port\": \"{{server.build.default.port}}\",\r\n            \"sync-chunk-writes\": \"false\",\r\n            \"view-distance\": \"6\"\r\n        }\r\n    }\r\n}",
        "startup": "{\r\n    \"done\": \")! For help, type \"\r\n}",
        "logs": "{}",
        "stop": "stop"
    },
    "scripts": {
        "installation": {
            "script": "#!/bin/bash\n# Modrinth Serverpack Installation Script\n# Server Files: /mnt/server\n\napt-get update -y\napt-get install -y curl python3 python3-pip python3-dateutil openjdk-11-jdk-headless rsync\npip3 install tqdm requests wget\n\n# Go to server folder\nmkdir -p /mnt/server\ncd /mnt/server\ncurl -o C-S-D.tar.gz -L \"https://github.com/SecretSphinx/Minecraft-Serverpack-Installer/archive/master.tar.gz\"\ntar -zxvf C-S-D.tar.gz --strip-components=1\n\n# Clean old modpack files if exist\nrm -rf libraries mods coremods .fabric user_jvm_args.txt server.jar\n\n# Run installer\npython3 run.py -provider modrinth -modpack-id ${MODPACK_ID} --modpack-version ${VERSION_ID} --clean-scripts --pterodactyl\n\n# Cleanup\nrm C-S-D.tar.gz\nrsync -a modpack_folder/ .\nrm -rf modpack_folder\nrm *.py README.md requirements.txt\nrm -r __pycache__\n\n# Forge symlink\nln -sf libraries/net/minecraftforge/forge/*/unix_args.txt unix_args.txt",
            "container": "debian:bullseye-slim",
            "entrypoint": "bash"
        }
    },
    "variables": [
        {
            "name": "Modrinth Project ID",
            "description": "The modpack project ID from Modrinth found on the modpack page.\r\n\r\n(Ex. https:\/\/modrinth.com\/modpack\/mechanic-craft is qNzODXk8)",
            "env_variable": "MODPACK_ID",
            "default_value": "426926",
            "user_viewable": true,
            "user_editable": false,
            "rules": "required|string|max:20"
        },
        {
            "name": "Modpack Version",
            "description": "Version of the modpack to use. Available versions can be found using the modrinth API (Ex: version ID mPQfuheP for https:\/\/modrinth.com\/modpack\/mechanic-craft). Set to \"latest\" to pull the latest version.",
            "env_variable": "VERSION_ID",
            "default_value": "mPQfuheP",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:20"
        },
        {
            "name": "Server Jarfile",
            "description": "Full name of JAR file to use to run the server. The download script will rename it to server.jar by default.",
            "env_variable": "SERVER_JARFILE",
            "default_value": "server.jar",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:50"
        },
        {
            "name": "JVM Startup Flags",
            "description": "JVM Startup flags to use for the server. For Modpacks we recommend using Aikars flags for optimum performance. They are enabled by default.\r\n\r\nDetails: https:\/\/aikar.co\/2018\/07\/02\/tuning-the-jvm-g1gc-garbage-collector-flags-for-minecraft\/",
            "env_variable": "STARTUP_FLAGS",
            "default_value": "-XX:+UseG1GC -XX:+ParallelRefProcEnabled -XX:MaxGCPauseMillis=200 -XX:+UnlockExperimentalVMOptions -XX:+DisableExplicitGC -XX:G1NewSizePercent=30 -XX:G1MaxNewSizePercent=40 -XX:G1HeapRegionSize=8M -XX:G1ReservePercent=20 -XX:G1HeapWastePercent=5 -XX:G1MixedGCCountTarget=4 -XX:InitiatingHeapOccupancyPercent=15 -XX:G1MixedGCLiveThresholdPercent=90 -XX:G1RSetUpdatingPauseTimePercent=5 -XX:SurvivorRatio=32 -XX:+PerfDisableSharedMem -XX:MaxTenuringThreshold=1 -Dusing.aikars.flags=https:\/\/mcflags.emc.gs -Daikars.new.flags=true -Dlog4j2.formatMsgNoLookups=true",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string|max:2000"
        }
    ]
}